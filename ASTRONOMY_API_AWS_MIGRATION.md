# AstronomyAPI - –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ AWS –∏ —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

## üìã –†–µ–∑—é–º–µ –ø—Ä–æ–±–ª–µ–º—ã

AstronomyAPI **–º–∏–≥—Ä–∏—Ä–æ–≤–∞–ª –Ω–∞ AWS** –∏ –∏–∑–º–µ–Ω–∏–ª –º–æ–¥–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –¢–µ–∫—É—â–∏–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–Ω—ã, –Ω–æ **–Ω–µ –∏–º–µ—é—Ç IAM-–ø—Ä–∞–≤** –¥–æ—Å—Ç—É–ø–∞ –∫ API.

## üîç –î–µ—Ç–∞–ª–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ endpoints
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ endpoints —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- `GET /api/v2/bodies/events/sun` - —Å–æ–±—ã—Ç–∏—è –°–æ–ª–Ω—Ü–∞
- `GET /api/v2/bodies/events/moon` - —Å–æ–±—ã—Ç–∏—è –õ—É–Ω—ã  
- `GET /api/v2/bodies` - —Å–ø–∏—Å–æ–∫ –Ω–µ–±–µ—Å–Ω—ã—Ö —Ç–µ–ª

### –¢–µ–∫—É—â–∞—è –æ—à–∏–±–∫–∞
```json
{
  "Message": "User is not authorized to access this resource with an explicit deny in an identity-based policy"
}
```

**–≠—Ç–æ AWS IAM –æ—à–∏–±–∫–∞** - –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ:
1. ‚úÖ –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–Ω—ã (Basic Auth —Ä–∞–±–æ—Ç–∞–µ—Ç)
2. ‚ùå AWS IAM –ø–æ–ª–∏—Ç–∏–∫–∞ **—è–≤–Ω–æ –∑–∞–ø—Ä–µ—â–∞–µ—Ç** –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º
3. ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ AstronomyAPI

### –¢–µ—Å—Ç—ã —Å curl
```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Basic Auth (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–æ–ª—É—á–∞–µ–º 403)
curl -H "Authorization: Basic <base64(appId:appSecret)>" \
  "https://api.astronomyapi.com/api/v2/bodies/events/sun?latitude=55.7558&longitude=37.6176&from_date=2025-12-09&to_date=2025-12-16&time=12:00:00&elevation=0"

# –†–µ–∑—É–ª—å—Ç–∞—Ç: HTTP 403 - AWS IAM deny
```

## üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç—É—Å–∞
üü¢ **All Systems Operational** - https://astronomyapi.statuspage.io/
- API V2: Operational (100% uptime)
- Authentication: Operational (100% uptime)
- –ù–µ—Ç –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 60 –¥–Ω–µ–π

### –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–µ—Ä–≤–∏—Å–∞
‚ö†Ô∏è –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ astronomyapi.com:
> "High traffic and usage have led to service outages, straining our resources... 
> We need your help to keep the stars within reach."

–ó–∞–ø—É—â–µ–Ω –∫—Ä–∞—É–¥—Ñ–∞–Ω–¥–∏–Ω–≥: https://gofund.me/e41e2ff0

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
1. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint**: `/api/v2/bodies/events/:body` (–≤–º–µ—Å—Ç–æ `/bodies/events/bodies`)
2. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Basic Auth —Å `appId:appSecret`
3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: snake_case (latitude, longitude, from_date, to_date, time, elevation)
4. **–†–∞–∑–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: –¥–ª—è sun –∏ moon –æ—Ç–¥–µ–ª—å–Ω–æ

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥
```php
// services/php-web/laravel-patches/app/Services/AstronomyApiService.php

private function fetchBodyEvents(string $body, float $lat, float $lon, 
    string $fromDate, string $toDate, string $time): array
{
    $url = "{$this->baseUrl}/bodies/events/{$body}";
    
    $params = [
        'latitude' => $lat,
        'longitude' => $lon,
        'from_date' => $fromDate,
        'to_date' => $toDate,
        'time' => $time,
        'elevation' => 0,
    ];

    $response = Http::timeout($this->timeout)
        ->withBasicAuth($this->appId, $this->appSecret) // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è Basic Auth
        ->acceptJson()
        ->get($url, $params);
        
    // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞
}
```

## üéØ –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–≤—è–∑–∞—Ç—å—Å—è —Å AstronomyAPI ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø
**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ó–∞–π—Ç–∏ –≤ Dashboard: https://astronomyapi.com/dashboard
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–∞—Ü–∏—é –∞–∫–∫–∞—É–Ω—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã –∏ –ø–æ–¥–ø–∏—Å–∫—É (–≤–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–∞ –ø–ª–∞—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ AWS)
4. –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- Dashboard: https://astronomyapi.com/dashboard
- Email: support@astronomyapi.com (–≤–æ–∑–º–æ–∂–Ω–æ)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ API
–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ API:

#### Sunrise-Sunset.org
- üü¢ **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ**: –±–µ–∑ –∫–ª—é—á–µ–π
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–π**: REST API
- ‚ö™ –î–∞–Ω–Ω—ã–µ: –≤–æ—Å—Ö–æ–¥/–∑–∞–∫–∞—Ç —Å–æ–ª–Ω—Ü–∞
- URL: https://sunrise-sunset.org/api

```bash
curl "https://api.sunrise-sunset.org/json?lat=55.7558&lng=37.6176&date=2025-12-09"
```

#### Open-Meteo (–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è)
- üü¢ **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ**: –±–µ–∑ –∫–ª—é—á–µ–π
- ‚úÖ **–ú–æ—â–Ω—ã–π**: —Å–æ–ª–Ω—Ü–µ, –ª—É–Ω–∞, –ø–æ–≥–æ–¥–∞
- ‚ö™ –î–∞–Ω–Ω—ã–µ: –≤–æ—Å—Ö–æ–¥/–∑–∞–∫–∞—Ç, —Ñ–∞–∑—ã –ª—É–Ω—ã
- URL: https://open-meteo.com/

```bash
curl "https://api.open-meteo.com/v1/forecast?latitude=55.7558&longitude=37.6176&daily=sunrise,sunset,moonrise,moonset"
```

#### TimeAndDate.com Astronomy API
- üí∞ **–ü–ª–∞—Ç–Ω—ã–π**: –æ—Ç $0.20/1000 –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **–ü–æ–ª–Ω—ã–π**: –∑–∞—Ç–º–µ–Ω–∏—è, –ø–ª–∞–Ω–µ—Ç—ã, –º–µ—Ç–µ–æ—Ä—ã
- ‚ö™ –î–∞–Ω–Ω—ã–µ: –≤—Å–µ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
- URL: https://dev.timeanddate.com/

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–¥–æ–∂–¥–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è AWS IAM
AstronomyAPI –º–æ–∂–µ—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ AWS.

## üß™ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (5 –∏–∑ 6 —Ñ—É–Ω–∫—Ü–∏–π)
- üõ∞Ô∏è **ISS Tracking**: –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ú–ö–° –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üî≠ **JWST Images**: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ç–µ–ª–µ—Å–∫–æ–ø–∞ James Webb
- üåå **NASA APOD**: –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –¥–Ω—è
- üî¨ **OSDR Data**: –ù–∞—É—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ NASA
- üéÆ **Legacy Features**: Pascal/Python —Å–µ—Ä–≤–∏—Å—ã

### ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (1 –∏–∑ 6)
- ‚õî **AstronomyAPI Events**: Astronomical Events (–≤–æ—Å—Ö–æ–¥/–∑–∞–∫–∞—Ç, —Ñ–∞–∑—ã –ª—É–Ω—ã)
  - –ü—Ä–∏—á–∏–Ω–∞: AWS IAM "explicit deny" –ø–æ–ª–∏—Ç–∏–∫–∞
  - –°—Ç–∞—Ç—É—Å: Graceful degradation (UI —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ)

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
1. ‚úÖ **–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ endpoints –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
2. ‚è≥ **–°–≤—è–∑–∞—Ç—å—Å—è —Å AstronomyAPI** - –≤—ã—è—Å–Ω–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –ø–æ—Å–ª–µ AWS –º–∏–≥—Ä–∞—Ü–∏–∏
3. üí° **–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã** - Open-Meteo –∏–ª–∏ Sunrise-Sunset.org

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ AstronomyAPI
2. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ - –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ API
3. –í–æ–∑–º–æ–∂–Ω–æ - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ –¥–æ–Ω–∞—Ç—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.astronomyapi.com/
- üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞: https://astronomyapi.statuspage.io/
- üè† –ì–ª–∞–≤–Ω–∞—è: https://astronomyapi.com/
- üí∞ –ö—Ä–∞—É–¥—Ñ–∞–Ω–¥–∏–Ω–≥: https://gofund.me/e41e2ff0
- üîê Dashboard: https://astronomyapi.com/dashboard

---
**–î–∞—Ç–∞**: 2025-12-09  
**–í–µ—Ä—Å–∏—è –∫–æ–¥–∞**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω AstronomyApiService.php (commit –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ endpoints)  
**–°—Ç–∞—Ç—É—Å**: –ö–æ–¥ –≥–æ—Ç–æ–≤, –æ–∂–∏–¥–∞–µ–º —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã AWS IAM —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã AstronomyAPI
