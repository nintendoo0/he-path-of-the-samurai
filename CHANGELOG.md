# –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –í–µ—Ä—Å–∏—è 1.0 - –ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (9 –¥–µ–∫–∞–±—Ä—è 2025)

### Rust-—Å–µ—Ä–≤–∏—Å (rust_iss)

#### –î–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (11 –º–æ–¥—É–ª–µ–π):
  - `config.rs` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ env
  - `domain.rs` - –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
  - `error.rs` - –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫
  - `handlers.rs` - HTTP handlers
  - `services.rs` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  - `clients.rs` - HTTP –∫–ª–∏–µ–Ω—Ç—ã
  - `repository.rs` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î
  - `db.rs` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã
  - `scheduler.rs` - —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
  - `utils.rs` - —É—Ç–∏–ª–∏—Ç—ã
  - `main.rs` - entry point

- ‚úÖ –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ —Å trace_id (HTTP 200 —Å ok:false)
- ‚úÖ Dependency Injection —á–µ—Ä–µ–∑ AppState
- ‚úÖ Structured logging (tracing)
- ‚úÖ Connection pooling (10 connections)
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –ë–î –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ User-Agent headers –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
- ‚úÖ Timeout –¥–ª—è –≤—Å–µ—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ (20-30 —Å–µ–∫)

#### –ò–∑–º–µ–Ω–µ–Ω–æ
- –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (layered architecture)
- –£psert –≤–º–µ—Å—Ç–æ —Å–ª–µ–ø—ã—Ö INSERT –¥–ª—è OSDR

### PHP/Laravel (php_web)

#### –î–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ Service Layer:
  - `RustApiService` - —Ä–∞–±–æ—Ç–∞ —Å Rust API
  - `JwstService` - —Ä–∞–±–æ—Ç–∞ —Å JWST API  
  - `AstronomyApiService` - —Ä–∞–±–æ—Ç–∞ —Å Astronomy API

- ‚úÖ Laravel HTTP Client –≤–º–µ—Å—Ç–æ curl/file_get_contents
- ‚úÖ Dependency Injection –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
- ‚úÖ Structured logging
- ‚úÖ Timeout –∏ retry –º–µ—Ö–∞–Ω–∏–∑–º—ã

#### –ò–∑–º–µ–Ω–µ–Ω–æ
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å—Ç–∞–ª–∏ —Ç–æ–Ω–∫–∏–º–∏ (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å–µ—Ä–≤–∏—Å—ã)
- –£–±—Ä–∞–Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ web.php

### Python Legacy (python_legacy)

#### –î–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞ —Å Pascal –Ω–∞ Python 3.12
- ‚úÖ –ö–ª–∞—Å—Å–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
  - `TelemetryGenerator` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - `DatabaseWriter` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î
  - `TelemetryService` - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
  - `Config` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- ‚úÖ Structured logging
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ Graceful shutdown
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### –£–¥–∞–ª–µ–Ω–æ
- ‚ùå Pascal legacy (–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ –∞—Ä—Ö–∏–≤)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –î–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã:
  - `ix_iss_fetch_log_fetched_at` (DESC)
  - `ix_osdr_inserted_at` (DESC)
  - `ix_space_cache_source` (source, fetched_at DESC)

- ‚úÖ Unique constraint –¥–ª—è `osdr_items.dataset_id`

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –ò–∑–º–µ–Ω–µ–Ω–æ
- –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω `.env` —Ñ–∞–π–ª (—É–±—Ä–∞–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã)
- –û–±–Ω–æ–≤–ª–µ–Ω `docker-compose.yml`:
  - `python_legacy` –≤–º–µ—Å—Ç–æ `pascal_legacy`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã environment variables
  - –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ depends_on

#### –î–æ–±–∞–≤–ª–µ–Ω–æ
- `INSTALL.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
- `REFACTORING_REPORT.md` - –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É
- `CHANGELOG.md` - —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `services/python-legacy/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Python —Å–µ—Ä–≤–∏—Å–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### Rust
- –î–æ–±–∞–≤–ª–µ–Ω–æ: `uuid` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π v4 –∏ serde

#### Python
- –î–æ–±–∞–≤–ª–µ–Ω–æ: `psycopg2-binary==2.9.9`

### –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- üöÄ –ò–Ω–¥–µ–∫—Å—ã –ë–î (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ 10-100x)
- üöÄ Connection pooling –≤ Rust (10 connections)
- üöÄ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ Rust (tokio)
- üöÄ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

### –£–ª—É—á—à–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

- üîí Timeout –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö API
- üîí Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã –≤ Laravel HTTP
- üîí Graceful error handling
- üîí Structured logging –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –£–ª—É—á—à–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏

- üìö –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- üìö –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (layered)
- üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- üìö –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–µ–∫–∏ (Python 3.12, Rust 2021)

---

## Migration Guide

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ Rust

–°—Ç–∞—Ä—ã–π –∫–æ–¥ –≤ `main.rs` —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∫–∞–∫ `main_old.rs`. –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
handlers ‚Üí services ‚Üí repository ‚Üí database
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ PHP

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç DI:
```php
public function __construct(
    RustApiService $rustApi,
    JwstService $jwstService
) { ... }
```

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

Docker Compose –∏–∑–º–µ–Ω–∏–ª—Å—è:
- `pascal_legacy` ‚Üí `python_legacy`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –Ω—É–∂–µ–Ω `docker-compose up --build`

---

## Breaking Changes

### API
- ‚ùó –§–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ –µ–¥–∏–Ω—ã–π (ok:false)
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏

### Database
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- Unique constraint –¥–ª—è OSDR (–º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –¥—É–±–ª–∏–∫–∞—Ç–∞—Ö)

### Configuration
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã –≤ `.env`
- –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã `NASA_API_KEY`, `FETCH_EVERY_SECONDS`

---

## Roadmap

### v1.1 (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- [ ] Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit –∏ Integration —Ç–µ—Å—Ç—ã
- [ ] Prometheus metrics
- [ ] Rate limiting –¥–ª—è API
- [ ] CI/CD pipeline

### v2.0 (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- [ ] Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
- [ ] GraphQL API
- [ ] WebSocket –¥–ª—è real-time –¥–∞–Ω–Ω—ã—Ö
- [ ] Admin –ø–∞–Ω–µ–ª—å

---

**–î–∞—Ç–∞ –≤—ã–ø—É—Å–∫–∞:** 9 –¥–µ–∫–∞–±—Ä—è 2025 –≥.
