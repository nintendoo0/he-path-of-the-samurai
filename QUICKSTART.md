# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞ "–ö–∞—Å—Å–∏–æ–ø–µ—è"

## –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ Docker Desktop
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω.

## –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```powershell
cd d:\he-path-of-the-samurai
docker-compose up --build -d
```

‚è±Ô∏è **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:** 10-15 –º–∏–Ω—É—Ç (Rust –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –¥–æ–ª–≥–æ)

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
```powershell
docker-compose logs -f
```

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã:
# - iss_db (PostgreSQL)
# - rust_iss (Rust API)  
# - php (PHP-FPM)
# - nginx (Web —Å–µ—Ä–≤–µ—Ä)
# - python_legacy (Telemetry)
```

## –®–∞–≥ 4: –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

- üåê **–ì–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥**: http://localhost:8080/dashboard
- üõ∞Ô∏è **ISS Tracker**: http://localhost:8080/iss
- üìä **OSDR Data**: http://localhost:8080/osdr
- ‚ö° **Rust API**: http://localhost:8081/health

### ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Astronomy API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è —Ä–∞–±–æ—Ç—ã –±–ª–æ–∫–∞ "–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è" –Ω—É–∂–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ https://astronomyapi.com

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [API_SETUP.md](API_SETUP.md)

**–ö—Ä–∞—Ç–∫–æ:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://astronomyapi.com (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
2. –ü–æ–ª—É—á–∏—Ç–µ Application ID –∏ Secret
3. –û–±–Ω–æ–≤–∏—Ç–µ `.env`:
   ```env
   ASTRO_APP_ID=–≤–∞—à_app_id
   ASTRO_APP_SECRET=–≤–∞—à_secret
   ```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `docker-compose restart php nginx`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Rust API
```powershell
curl http://localhost:8081/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok","now":"2025-12-09T..."}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ ISS –¥–∞–Ω–Ω—ã—Ö
```powershell
curl http://localhost:8081/last
# –í–µ—Ä–Ω—ë—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–∑–∏—Ü–∏–∏ ISS
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```powershell
docker-compose exec db psql -U monouser -d monolith -c "SELECT count(*) FROM iss_fetch_log;"
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Python Legacy
```powershell
docker-compose logs python_legacy --tail=10
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏: "Inserted telemetry record: ..."
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ Rust –¥–æ–ª–≥–æ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –ü–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞ Rust –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-15 –º–∏–Ω—É—Ç.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å:
```powershell
docker-compose logs rust_iss
```

### –ï—Å–ª–∏ PHP —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ—á–µ–Ω—å –¥–æ–ª–≥–æ
PHP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã (llvm, clang) –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è PostgreSQL.
–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 3-5 –º–∏–Ω—É—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Å–±–æ—Ä–∫–µ.

### –û—à–∏–±–∫–∞ "host not found in upstream php"
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç PHP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```powershell
docker-compose logs php
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ —Å `$'\r': command not found` ‚Äî —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ line endings.
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –≤ Dockerfile (–∞–≤—Ç–æ–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è CRLF‚ÜíLF).

### –ï—Å–ª–∏ –ø–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç
–ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç—ã –≤ `docker-compose.yml`:
```yaml
nginx:
  ports:
    - "8080:80"  # –ò–∑–º–µ–Ω–∏—Ç–µ 8080 –Ω–∞ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
```

### –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏
–û—á–∏—Å—Ç–∏—Ç–µ –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:
```powershell
docker-compose down -v
docker-compose up --build
```

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö
```powershell
docker-compose stop
```

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```powershell
docker-compose down
```

### –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–≤–∫–ª—é—á–∞—è volumes)
```powershell
docker-compose down -v
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```powershell
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart rust_iss

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f nginx

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
docker-compose exec rust_iss sh
docker-compose exec db psql -U monouser -d monolith

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose up --build rust_iss -d

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats
```

## API Endpoints

### Rust API (http://localhost:8081)
- `GET /health` - Health check
- `GET /last` - –ü–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è ISS
- `GET /iss/trend` - –¢—Ä–µ–Ω–¥ –¥–≤–∏–∂–µ–Ω–∏—è ISS
- `GET /osdr/list` - –°–ø–∏—Å–æ–∫ OSDR –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
- `GET /osdr/sync` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è OSDR
- `GET /space/apod/latest` - –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ç–æ –¥–Ω—è
- `GET /space/summary` - –°–≤–æ–¥–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö

### Laravel (http://localhost:8080)
- `GET /dashboard` - –ì–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥
- `GET /iss` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ ISS
- `GET /osdr` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ OSDR
- `GET /api/jwst/feed` - JWST –≥–∞–ª–µ—Ä–µ—è
- `GET /api/astro/events` - –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `.env`:
- `NASA_API_KEY` - –∫–ª—é—á NASA API
- `DATABASE_URL` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (`*_EVERY_SECONDS`)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ rust-iss/        # Rust API —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ php-web/         # Laravel –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ python-legacy/   # Python —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ pascal-legacy/   # –°—Ç–∞—Ä—ã–π Pascal (–∞—Ä—Ö–∏–≤)
‚îú‚îÄ‚îÄ db/                  # SQL –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ .env                 # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ INSTALL.md          # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìñ [REFACTORING_REPORT.md](REFACTORING_REPORT.md) - –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É
- üìã [CHANGELOG.md](CHANGELOG.md) - –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- üìö [README.md](README.md) - –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 9 –¥–µ–∫–∞–±—Ä—è 2025 –≥.
